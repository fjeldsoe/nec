(this.webpackJsonpnec=this.webpackJsonpnec||[]).push([[0],{118:function(e,t,n){e.exports=n(233)},233:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(30),i=n.n(r),c=n(63),l=n.n(c),d=n(109),s=n(9),p=n(24),m=n(5),g=n(33),u=n(8),b=n(236),h=n(32),f=n.n(h);n(127),n(234),n(129);const w=m.b.img.withConfig({displayName:"Image",componentId:"sc-1ies6rj-0"})(["width:auto;height:auto;max-width:100%;max-height:100%;"]);var y=e=>{const t=e.image,n=e.className,a=e.sizes;return o.a.createElement(w,{className:n,key:t.id,srcSet:(e=>e.downloadUrls.map(e=>{const t=Object(s.a)(Object.entries(e)[0],2),n=t[0],a=t[1],o=n.split("x")[0];return"".concat(a," ").concat(o,"w")}))(t).join(", "),src:Object.values(t.downloadUrls[0])[0],sizes:a,alt:t.metadata.name,loading:"lazy"})};const x={sm:576,md:768,lg:992,xl:1200};function E(e){return"@media (min-width: ".concat(x[e],"px)")}var j=x,v=n(67);const O=m.b.div.withConfig({displayName:"Gallery__Wrapper",componentId:"m682mz-0"})(["flex:1 0 auto;display:flex;flex-wrap:wrap;padding:5px;"]),I=Object(v.a)(e=>o.a.createElement(O,e)),_=m.b.div.withConfig({displayName:"Gallery__Item",componentId:"m682mz-1"})(["flex:0 0 auto;width:calc(50%);padding:5px;overflow:hidden;","{width:calc(33.3%);}","{width:calc(25%);}","{width:calc(20%);}"],E("sm"),E("md"),E("lg")),C=Object(v.b)(e=>o.a.createElement(_,e)),k=Object(m.b)(y).withConfig({displayName:"Gallery__Thumb",componentId:"m682mz-2"})(["width:100%;height:100%;object-fit:cover;border-radius:3px;"]),N=m.b.div.withConfig({displayName:"Gallery__UploadIndicator",componentId:"m682mz-3"})(["position:fixed;top:0;left:0;right:0;height:3px;opacity:",";transition:opacity 300ms;pointer-events:none;&:after{content:'';display:block;height:inherit;width:","%;background:#54a2e6;}"],e=>0===e.uploadProgress||100===e.uploadProgress?0:1,e=>e.uploadProgress||0),S=m.b.div.withConfig({displayName:"Gallery__FooterBar",componentId:"m682mz-4"})(["margin:auto 10px 10px;border-radius:5px;padding:10px;font-size:12px;background:#333;color:#999;"]),D=m.b.button.withConfig({displayName:"Gallery__EmailButton",componentId:"m682mz-5"})(["background:none;border:0;padding:0;margin:0;color:#999;cursor:pointer;"]),B=m.b.button.withConfig({displayName:"Gallery__LoginButton",componentId:"m682mz-6"})(["padding:0;margin:0;background:none;border:0;color:#999;cursor:pointer;"]);var L=function(e){const t=e.images,n=e.uploadProgress,a=e.handleSortEnd,r=e.shouldCancelStart,i=e.user,c=e.signOut,l=Object(u.g)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{uploadProgress:n}),o.a.createElement(I,{axis:"xy",pressDelay:500,onSortEnd:a,shouldCancelStart:r},t.length?t.map((e,t)=>o.a.createElement(C,{index:t,key:e.id},o.a.createElement(g.b,{to:"/nec/image/".concat(e.id)},o.a.createElement(k,{image:e,sizes:"50vw, (min-width: ".concat(j.sm,"px) 33.3vw, (min-width: ").concat(j.md,"px) 25vw, (min-width: ").concat(j.lg,"px) 20vw")})))):null),o.a.createElement(S,null,o.a.createElement("span",null,"\xa9 Niels Erik Christiansen"),o.a.createElement("span",null," | "),o.a.createElement(D,{onClick:function(){window.open("mailto:nechristiansen@gmail.com","_blank")}},"@ Email"),o.a.createElement("span",null," | "),o.a.createElement(B,{onClick:i?c:function(){l.push("/nec/login")}},i?"Log ud":"Log ind")))},z=n(113),P=n(40),F=n(114),G=n.n(F),T=n(18),W=n(115),A=(n(232),n(117));function R(){const e=Object(z.a)(["\n    body {\n        &:before {\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-image: ",";\n            filter: blur(100px);\n        }\n    }\n\n    .editorWrapper {\n        color: black;\n        margin-bottom: 5px;\n    }\n\n    .editorTextField {\n        height: auto;\n        padding: 10px;\n        background: white;\n    }\n"]);return R=function(){return e},e}const U=Object(m.a)(R(),e=>e.gradient),J=m.b.div.withConfig({displayName:"ImageDetails__Wrapper",componentId:"s7hyp6-0"})(["position:relative;display:flex;flex-direction:column;margin:0 auto;padding-bottom:40px;"]),K=m.b.div.withConfig({displayName:"ImageDetails__Background",componentId:"s7hyp6-1"})(["background:rgb(0,0,0);background:linear-gradient(0deg,rgba(0,0,0,0.20211834733893552) 0%,rgba(0,0,0,0) 100%);border-bottom-left-radius:5px;border-bottom-right-radius:5px;margin-bottom:20px;"]),M=m.b.div.withConfig({displayName:"ImageDetails__ImageWrapper",componentId:"s7hyp6-2"})(["position:relative;flex:1 0 auto;padding:10px;"]),Q=Object(m.b)(y).withConfig({displayName:"ImageDetails__DetailedImage",componentId:"s7hyp6-3"})(["flex:none;display:block;height:calc(100vh - 20px);margin:0 auto;filter:drop-shadow(0px 20px 20px rgba(0,0,0,0.5));object-fit:contain;"]),q=m.b.div.withConfig({displayName:"ImageDetails__Description",componentId:"s7hyp6-4"})(["flex:1 1 auto;min-width:1px;padding:10px 20px;"]),H=m.b.div.withConfig({displayName:"ImageDetails__ButtonBar",componentId:"s7hyp6-5"})(["position:relative;flex:none;display:flex;height:60px;margin:auto 20px;box-shadow:0 5px 10px rgba(0,0,0,0.2);"]),$=m.b.button.withConfig({displayName:"ImageDetails__Button",componentId:"s7hyp6-6"})(["flex:1 1 50%;font-weight:bold;border:0;"]),V=Object(m.b)($).withConfig({displayName:"ImageDetails__BackButton",componentId:"s7hyp6-7"})(["background:",";color:",";"],({backgroundColor:e})=>e,({fontColor:e})=>e),X=Object(m.b)($).withConfig({displayName:"ImageDetails__DeleteButton",componentId:"s7hyp6-8"})(["color:#fff;background:linear-gradient(0deg,rgba(162,0,0,1) 0%,rgba(218,0,0,1) 100%);"]),Y=m.b.div.withConfig({displayName:"ImageDetails__EditorWrappper",componentId:"s7hyp6-9"})(["margin:0 auto;"]),Z=m.b.button.withConfig({displayName:"ImageDetails__SaveButton",componentId:"s7hyp6-10"})(["background:orange;border:none;width:100%;height:40px;font-weight:bold;"]);var ee=e=>{const t=e.history,n=e.image,r=e.removeImage,i=e.updateDescription,c=n.description,l=n.metadata.visionData.colors,d=l.sort((e,t)=>t.score-e.score).reduce((e,t,n)=>{const a=t.color,o=a.red,r=a.green,i=a.blue;return n<2?[...e,"rgb(".concat(o,", ").concat(r,", ").concat(i,")")]:e},[]),m=Object(s.a)(d,2),g=[m[0],m[1]].sort((e,t)=>Object(P.b)(t)-Object(P.b)(e)),u=Object(s.a)(g,2),b=(u[0],u[1]),h=Object(a.useContext)(pe).user,f=G()(l.map(({color:{red:e,green:t,blue:n}})=>"rgb(".concat(e,",").concat(t,",").concat(n,")"))),w=["#000","#FFF"].sort((e,t)=>Object(P.a)(b,t)-Object(P.a)(b,e)),y=Object(s.a)(w,1)[0],x=Object(a.useState)(c?T.EditorState.createWithContent(Object(T.convertFromRaw)(c)):T.EditorState.createEmpty()),E=Object(s.a)(x,2),j=E[0],v=E[1],O=Object(a.useState)(!1),I=Object(s.a)(O,2),_=I[0],C=I[1];return Object(a.useEffect)(()=>{C(!0)},[j]),o.a.createElement(o.a.Fragment,null,o.a.createElement(U,{gradient:f.css("radial")}),o.a.createElement(J,null,o.a.createElement(K,null,o.a.createElement(M,null,o.a.createElement(Q,{image:Object(p.a)({},n)})),o.a.createElement(q,null,h&&o.a.createElement(Y,null,o.a.createElement(W.Editor,{editorState:j,onEditorStateChange:v,toolbarClassName:"editorToolbar",wrapperClassName:"editorWrapper",editorClassName:"editorTextField"}),_&&o.a.createElement(Z,{onClick:function(){const e=n.id,t=Object(T.convertToRaw)(j.getCurrentContent());i({id:e,description:t}),C(!1)}},"Gem beskrivelse")),!h&&c&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(A.a)(Object(T.convertFromRaw)(c))}}))),o.a.createElement(H,null,o.a.createElement(V,{backgroundColor:b,fontColor:y,onClick:()=>t.push("/nec")},"Tilbage"),h&&o.a.createElement(X,{onClick:()=>r(n)},"Slet billede"))))},te=n(116),ne=n.n(te);const ae=m.b.div.withConfig({displayName:"App__LoggedInBar",componentId:"wphell-0"})(["position:relative;display:flex;justify-content:space-between;align-items:center;padding:10px;background:#333;"]),oe=m.b.form.withConfig({displayName:"App__LoginForm",componentId:"wphell-1"})(["width:100%;max-width:500px;padding:20px;margin:0 auto;"]),re=m.b.input.withConfig({displayName:"App__FormInput",componentId:"wphell-2"})(["display:block;width:100%;height:40px;padding:10px;margin-bottom:10px;border:1px solid #999;background:#fff;"]),ie=m.b.button.withConfig({displayName:"App__LoginButton",componentId:"wphell-3"})(["width:100%;height:40px;"]),ce=Object(m.b)(g.b).withConfig({displayName:"App__StyledLink",componentId:"wphell-4"})(["display:flex;justify-content:center;align-items:center;height:40px;margin-top:20px;color:#fff;"]);f.a.initializeApp({apiKey:"AIzaSyBPG6_rLNCqJKQaQxRxoL9kiNRrst_SGng",authDomain:"necgallery-9b4b2.firebaseapp.com",databaseURL:"https://necgallery-9b4b2.firebaseio.com",projectId:"necgallery-9b4b2",storageBucket:"necgallery-9b4b2.appspot.com",messagingSenderId:"534201773677"});const le=f.a.firestore(),de=le.collection("gallery"),se=f.a.storage().ref(),pe=Object(a.createContext)();function me(e){e.preventDefault()}function ge(e){return de.doc(e).delete()}var ue=function(){const e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(s.a)(i,2),m=c[0],h=c[1],w=Object(a.useState)(0),y=Object(s.a)(w,2),x=y[0],E=y[1],j=Object(a.useState)(""),v=Object(s.a)(j,2),O=v[0],I=v[1],_=Object(a.useState)(""),C=Object(s.a)(_,2),k=C[0],N=C[1];function S(e){e.preventDefault();const t=e.dataTransfer.files,n=void 0===t?{}:t;!function(e,t){Promise.all(e.map(e=>new Promise((n,a)=>{const o=Object(b.a)(),r=se.child("gallery/".concat(o,"/original.jpg")).put(e);r.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t(n)})),r.then(e=>{n(Object(p.a)(Object(p.a)({},e),{},{id:o}))}).catch(e=>{a(new Error(e.message_))})}))).catch(e=>{alert(e)})}(Object.values(n).reduce((e,t)=>t.type.includes("image")?[...e,t]:e,[]),E)}function D(){return!1===m}function B({oldIndex:e,newIndex:t}){r(n=>ne()(n,e,t))}function z(){de.orderBy("order").get().then(e=>{r(A(e))})}function P({id:e,description:t}){de.doc(e).update({description:t}),z()}function F(e){if(!window.confirm("Er du sikker p\xe5 du vil slette billedet?"))return;const t=e.id,n=e.downloadUrls.map(e=>{const t=Object.keys(e);return Object(s.a)(t,1)[0]});Promise.all([n.map(e=>{return n="gallery/".concat(t,"/").concat(e,".jpg"),se.child(n).delete();var n}),ge(t)]).then((function(){console.log("successfully deleted images"),z()})).catch((function(e){console.log(e)}))}function G(e){e.preventDefault(),f.a.auth().signInWithEmailAndPassword(O,k).catch((function(e){e.code;const t=e.message;alert(t)}))}function T(){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.auth().signOut();case 2:h(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){const t=[];return e.forEach(e=>{const n=e.id,a=e.data();t.push(Object(p.a)({id:n},a))}),t}return Object(a.useEffect)(()=>{const e=f.a.auth().onAuthStateChanged((function(e){e&&h(e)}));return()=>{e()}},[]),Object(a.useEffect)(()=>(z(),de.onSnapshot(e=>{const t=A(e),n=Math.max(...t.map(({order:e})=>e)),a=t.find(({order:e})=>-1===e);a&&r(e=>[...e,Object(p.a)(Object(p.a)({},a),{},{order:n+1})])}),document.addEventListener("drop",S),document.addEventListener("dragover",me),()=>{document.removeEventListener("drop",S),document.removeEventListener("dragover",me)}),[]),Object(a.useEffect)(()=>{if(m){const e=le.batch();Object.entries(n).forEach(([t,n])=>{const a=n.id,o=de.doc(a);e.update(o,{order:parseInt(t)})}),e.commit().then(()=>{console.log("committed batch")})}},[m,n]),console.log(m),o.a.createElement(pe.Provider,{value:{user:m}},m&&o.a.createElement(ae,null,o.a.createElement("span",null,"Du er logget ind")),o.a.createElement(g.a,null,o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/nec",render:e=>o.a.createElement(L,Object.assign({},e,{images:n,user:m,signOut:T,uploadProgress:x,handleSortEnd:B,shouldCancelStart:D}))}),o.a.createElement(u.b,{exact:!0,path:"/nec/image/:id",render:e=>{if(n.length){const t=e.match.params.id,a=n.find(e=>e.id===t);return a?o.a.createElement(ee,Object.assign({},e,{image:a,removeImage:F,updateDescription:P,user:m})):o.a.createElement(u.a,{to:"/nec"})}}}),o.a.createElement(u.b,{exact:!0,path:"/nec/login",render:()=>!1===m?o.a.createElement(oe,{onSubmit:G},o.a.createElement(re,{type:"text",placeholder:"Email",value:O,onChange:e=>I(e.target.value)}),o.a.createElement(re,{type:"password",placeholder:"Password",value:k,onChange:e=>N(e.target.value)}),o.a.createElement(ie,null,"Log ind"),o.a.createElement(ce,{to:"/nec"},"Tilbage")):o.a.createElement(u.a,{to:"/nec"})}),o.a.createElement(u.a,{to:"/nec"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[118,1,2]]]);
//# sourceMappingURL=main.04c1e556.chunk.js.map