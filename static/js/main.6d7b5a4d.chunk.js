(this.webpackJsonpnec=this.webpackJsonpnec||[]).push([[0],{121:function(n,e,t){n.exports=t(242)},242:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),o=t(32),c=t.n(o),i=t(64),l=t.n(i),u=t(111),s=t(15),d=t(26),b=t(7),m=t(39),p=t(10),g=t(8),f=t(245),h=t(2),j=t.n(h),O=(t(71),t(243),t(112)),x=t.n(O);t(138);function E(){const n=Object(b.a)(["\n    width: auto;\n    height: auto;\n    max-width: 100%;\n    max-height: 100%;\n"]);return E=function(){return n},n}const v=g.b.img(E());var w=n=>{const e=n.image,t=n.className,a=n.sizes;return r.a.createElement(v,{className:t,key:e.id,srcSet:(n=>n.downloadUrls.map(n=>{const e=Object(s.a)(Object.entries(n)[0],2),t=e[0],a=e[1],r=t.split("x")[0];return"".concat(a," ").concat(r,"w")}))(e).join(", "),src:Object.values(e.downloadUrls[0])[0],sizes:a,alt:e.metadata.name,loading:"lazy"})};const y={sm:576,md:768,lg:992,xl:1200};function k(n){return"@media (min-width: ".concat(y[n],"px)")}var C=y,S=t(68);function I(){const n=Object(b.a)(["\n    padding: 0;\n    margin: 0;\n    background: none;\n    border: 0;\n    color: #999;\n    cursor: pointer;\n"]);return I=function(){return n},n}function P(){const n=Object(b.a)(["\n    background: none;\n    border: 0;\n    padding: 0;\n    margin: 0;\n    color: #999;\n    cursor: pointer;\n"]);return P=function(){return n},n}function F(){const n=Object(b.a)(["\n    margin: auto 10px 10px;\n    border-radius: 5px;\n    padding: 10px;\n    font-size: 12px;\n    background: #333;\n    color: #999;\n"]);return F=function(){return n},n}function L(){const n=Object(b.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 3px;\n    opacity: ",";\n    transition: opacity 300ms;\n    pointer-events: none;\n\n    &:after {\n        content: '';\n        display: block;\n        height: inherit;\n        width: ","%;\n        background: #54a2e6;\n    }\n"]);return L=function(){return n},n}function D(){const n=Object(b.a)(["\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 3px;\n"]);return D=function(){return n},n}function N(){const n=Object(b.a)(["\n    flex: 0 0 auto;\n    width: calc(50%);\n    max-height: 300px;\n    padding: 5px;\n    overflow: hidden;\n\n    "," {\n        width: calc(33.3%);\n    }\n\n    "," {\n        width: calc(25%);\n    }\n\n    "," {\n        width: calc(20%);\n    }\n"]);return N=function(){return n},n}function z(){const n=Object(b.a)(["\n    flex: 1 0 auto;\n    display: flex;\n    flex-wrap: wrap;\n    padding: 5px;\n"]);return z=function(){return n},n}const R=g.b.div(z()),T=Object(S.a)(n=>r.a.createElement(R,n)),_=g.b.div(N(),k("sm"),k("md"),k("lg")),B=Object(S.b)(n=>r.a.createElement(_,n)),A=Object(g.b)(w)(D()),U=g.b.div(L(),n=>0===n.uploadProgress||100===n.uploadProgress?0:1,n=>n.uploadProgress||0),W=g.b.div(F()),G=g.b.button(P()),J=g.b.button(I());var H=function(n){const e=n.images,t=n.uploadProgress,a=n.handleSortEnd,o=n.shouldCancelStart,c=n.user,i=n.signOut,l=Object(p.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{uploadProgress:t}),r.a.createElement(T,{axis:"xy",pressDelay:500,onSortEnd:a,shouldCancelStart:o},e.length?e.map((n,e)=>r.a.createElement(B,{index:e,key:n.id,"data-order":n.order},r.a.createElement(m.b,{to:"/nec/image/".concat(n.id)},r.a.createElement(A,{image:n,sizes:"50vw, (min-width: ".concat(C.sm,"px) 33.3vw, (min-width: ").concat(C.md,"px) 25vw, (min-width: ").concat(C.lg,"px) 20vw")})))):null),r.a.createElement(W,null,r.a.createElement("span",null,"\xa9 Niels Erik Christiansen"),r.a.createElement("span",null," | "),r.a.createElement(G,{onClick:function(){window.open("mailto:nechristiansen@gmail.com","_blank")}},"@ Email"),r.a.createElement("span",null," | "),r.a.createElement(J,{onClick:c?i:function(){l.push("/nec/login")}},c?"Log ud":"Log ind")))},K=t(41),M=t(117),Q=t.n(M),q=t(20),V=t(118),$=(t(241),t(120));function X(){const n=Object(b.a)(["\n    background: orange;\n    border: none;\n    width: 100%;\n    height: 40px;\n    font-weight: bold;\n"]);return X=function(){return n},n}function Y(){const n=Object(b.a)(["\n    margin: 0 auto;\n"]);return Y=function(){return n},n}function Z(){const n=Object(b.a)(["\n    color: #fff;\n    background: linear-gradient(0deg, rgba(162, 0, 0, 1) 0%, rgba(218, 0, 0, 1) 100%);\n"]);return Z=function(){return n},n}function nn(){const n=Object(b.a)(["\n    background: ",";\n    color: ",";\n"]);return nn=function(){return n},n}function en(){const n=Object(b.a)(["\n    flex: 1 1 50%;\n    font-weight: bold;\n    border: 0;\n"]);return en=function(){return n},n}function tn(){const n=Object(b.a)(["\n    position: relative;\n    flex: none;\n    display: flex;\n    width: 100%;\n    height: 60px;\n    margin: auto 0 20px 0;\n    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n"]);return tn=function(){return n},n}function an(){const n=Object(b.a)(["\n    flex: 1 1 auto;\n    min-width: 1px;\n    padding: 10px 20px;\n"]);return an=function(){return n},n}function rn(){const n=Object(b.a)(["\n    flex: none;\n    display: block;\n    max-height: calc(100vh - 20px);\n    margin: 0 auto;\n    filter: drop-shadow(0px 20px 20px rgba(0, 0, 0, 0.5));\n"]);return rn=function(){return n},n}function on(){const n=Object(b.a)(["\n    position: relative;\n    flex: 1 0 auto;\n    padding: 10px;\n"]);return on=function(){return n},n}function cn(){const n=Object(b.a)(["\n    background-color: rgba(0, 0, 0, 0.2);\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    margin-bottom: 20px;\n"]);return cn=function(){return n},n}function ln(){const n=Object(b.a)(["\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    max-width: 90%;\n    margin: 0 auto;\n"]);return ln=function(){return n},n}function un(){const n=Object(b.a)(["\n    body {\n        &:before {\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-image: ",";\n            filter: blur(100px);\n        }\n    }\n\n    .editorWrapper {\n        color: black;\n        margin-bottom: 5px;\n    }\n\n    .editorTextField {\n        height: auto;\n        padding: 10px;\n        background: white;\n    }\n"]);return un=function(){return n},n}const sn=Object(g.a)(un(),n=>n.gradient),dn=g.b.div(ln()),bn=g.b.div(cn()),mn=g.b.div(on()),pn=Object(g.b)(w)(rn()),gn=g.b.div(an()),fn=g.b.div(tn()),hn=g.b.button(en()),jn=Object(g.b)(hn)(nn(),({backgroundColor:n})=>n,({fontColor:n})=>n),On=Object(g.b)(hn)(Z()),xn=g.b.div(Y()),En=g.b.button(X());var vn=n=>{const e=n.history,t=n.image,o=n.removeImage,c=n.updateDescription,i=t.description,l=t.metadata.visionData.colors,u=l.sort((n,e)=>e.score-n.score).reduce((n,e,t)=>{const a=e.color,r=a.red,o=a.green,c=a.blue;return t<2?[...n,"rgb(".concat(r,", ").concat(o,", ").concat(c,")")]:n},[]),b=Object(s.a)(u,2),m=[b[0],b[1]].sort((n,e)=>Object(K.b)(e)-Object(K.b)(n)),p=Object(s.a)(m,2),g=(p[0],p[1]),f=Object(a.useContext)(Fn).user,h=Q()(l.map(({color:{red:n,green:e,blue:t}})=>"rgb(".concat(n,",").concat(e,",").concat(t,")"))),j=["#000","#FFF"].sort((n,e)=>Object(K.a)(g,e)-Object(K.a)(g,n)),O=Object(s.a)(j,1)[0],x=Object(a.useState)(i?q.EditorState.createWithContent(Object(q.convertFromRaw)(i)):q.EditorState.createEmpty()),E=Object(s.a)(x,2),v=E[0],w=E[1],y=Object(a.useState)(!1),k=Object(s.a)(y,2),C=k[0],S=k[1];return Object(a.useEffect)(()=>{S(!0)},[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(sn,{gradient:h.css("radial")}),r.a.createElement(dn,null,r.a.createElement(bn,null,r.a.createElement(mn,null,r.a.createElement(pn,{image:Object(d.a)({},t),sizes:"90vw"})),r.a.createElement(gn,null,f&&r.a.createElement(xn,null,r.a.createElement(V.Editor,{editorState:v,onEditorStateChange:w,toolbarClassName:"editorToolbar",wrapperClassName:"editorWrapper",editorClassName:"editorTextField"}),C&&r.a.createElement(En,{onClick:function(){const n=t.id,e=Object(q.convertToRaw)(v.getCurrentContent());c({id:n,description:e}),S(!1)}},"Gem beskrivelse")),!f&&i&&r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object($.a)(Object(q.convertFromRaw)(i))}}))),r.a.createElement(fn,null,r.a.createElement(jn,{backgroundColor:g,fontColor:O,onClick:()=>e.push("/nec")},"Tilbage"),f&&r.a.createElement(On,{onClick:()=>o(t)},"Slet billede"))))},wn=t(119),yn=t.n(wn);function kn(){const n=Object(b.a)(["\n    position: relative;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px;\n    background: #333;\n"]);return kn=function(){return n},n}const Cn=g.b.div(kn());j.a.initializeApp({apiKey:"AIzaSyBPG6_rLNCqJKQaQxRxoL9kiNRrst_SGng",authDomain:"necgallery-9b4b2.firebaseapp.com",databaseURL:"https://necgallery-9b4b2.firebaseio.com",projectId:"necgallery-9b4b2",storageBucket:"necgallery-9b4b2.appspot.com",messagingSenderId:"534201773677"});const Sn=j.a.firestore(),In=Sn.collection("gallery"),Pn=j.a.storage().ref(),Fn=Object(a.createContext)();function Ln(n){n.preventDefault()}function Dn(n){return In.doc(n).delete()}var Nn=function(){const n=Object(a.useState)([]),e=Object(s.a)(n,2),t=e[0],o=e[1],c=Object(a.useState)(!1),i=Object(s.a)(c,2),b=i[0],g=i[1],h=Object(a.useState)(0),O=Object(s.a)(h,2),E=O[0],v=O[1];function w(n){n.preventDefault();const e=n.dataTransfer.files,t=void 0===e?{}:e;!function(n,e){Promise.all(n.map(n=>new Promise((t,a)=>{const r=Object(f.a)(),o=Pn.child("gallery/".concat(r,"/original.jpg")).put(n);o.on("state_changed",(function(n){var t=n.bytesTransferred/n.totalBytes*100;e(t)})),o.then(n=>{t(Object(d.a)(Object(d.a)({},n),{},{id:r}))}).catch(n=>{a(new Error(n.message_))})}))).catch(n=>{alert(n)})}(Object.values(t).reduce((n,e)=>e.type.includes("image")?[...n,e]:n,[]),v)}function y(){return!1===b}function k({oldIndex:n,newIndex:e}){o(t=>yn()(t,n,e))}function C(){In.orderBy("order").get().then(n=>{o(L(n))})}function S({id:n,description:e}){In.doc(n).update({description:e}),C()}function I(n){if(!window.confirm("Er du sikker p\xe5 du vil slette billedet?"))return;const e=n.id,t=n.downloadUrls.map(n=>{const e=Object.keys(n);return Object(s.a)(e,1)[0]});Promise.all([t.map(n=>{return t="gallery/".concat(e,"/").concat(n,".jpg"),Pn.child(t).delete();var t}),Dn(e)]).then((function(){console.log("successfully deleted images"),C()})).catch((function(n){console.log(n)}))}function P(){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.a.auth().signOut();case 2:g(!1);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function L(n){const e=[];return n.forEach(n=>{const t=n.id,a=n.data();e.push(Object(d.a)({id:t},a))}),e}return Object(a.useEffect)(()=>{const n=j.a.auth().onAuthStateChanged((function(n){n&&g(n)}));return()=>{n()}},[]),Object(a.useEffect)(()=>(C(),In.onSnapshot(n=>{const e=L(n),t=Math.max(...e.map(({order:n})=>n)),a=e.find(({order:n})=>-1===n);a&&o(n=>[...n,Object(d.a)(Object(d.a)({},a),{},{order:t+1})])}),document.addEventListener("drop",w),document.addEventListener("dragover",Ln),()=>{document.removeEventListener("drop",w),document.removeEventListener("dragover",Ln)}),[]),Object(a.useEffect)(()=>{if(b){const n=Sn.batch();Object.entries(t).forEach(([e,t])=>{const a=t.id,r=In.doc(a);n.update(r,{order:parseInt(e)})}),n.commit().then(()=>{console.log("committed batch")})}},[b,t]),r.a.createElement(Fn.Provider,{value:{user:b}},b&&r.a.createElement(Cn,null,r.a.createElement("span",null,"Hej ",b.displayName)),r.a.createElement(m.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/nec",render:n=>r.a.createElement(H,Object.assign({},n,{images:t,user:b,signOut:P,uploadProgress:E,handleSortEnd:k,shouldCancelStart:y}))}),r.a.createElement(p.b,{exact:!0,path:"/nec/image/:id",render:n=>{if(t.length){const e=n.match.params.id,a=t.find(n=>n.id===e);return a?r.a.createElement(vn,Object.assign({},n,{image:a,removeImage:I,updateDescription:S,user:b})):r.a.createElement(p.a,{to:"/nec"})}}}),r.a.createElement(p.b,{exact:!0,path:"/nec/login",render:()=>!1===b?r.a.createElement(x.a,{uiConfig:{signInFlow:"popup",signInSuccessUrl:"/nec",signInOptions:[j.a.auth.FacebookAuthProvider.PROVIDER_ID]},firebaseAuth:j.a.auth()}):r.a.createElement(p.a,{to:"/nec"})}),r.a.createElement(p.a,{to:"/nec"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Nn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{n.unregister()})}},[[121,1,2]]]);
//# sourceMappingURL=main.6d7b5a4d.chunk.js.map