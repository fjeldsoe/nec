(this.webpackJsonpnec=this.webpackJsonpnec||[]).push([[0],{246:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(41),r=n.n(i),c=n(73),l=n.n(c),d=n(118),s=n(44),u=n(12),p=n(34),m=n(8),g=n(43),f=n(11),b=n(260),h=n(35),w=(n(139),n(248),n(141),n(247),m.b.img.withConfig({displayName:"Image",componentId:"sc-1ies6rj-0"})(["width:auto;height:auto;max-width:100%;max-height:100%;"])),y=function(e){var t=e.image,n=e.className,a=e.sizes;return o.a.createElement(w,{className:n,key:t.id,srcSet:function(e){return e.downloadUrls.map((function(e){var t=Object(u.a)(Object.entries(e)[0],2),n=t[0],a=t[1],o=n.split("x")[0];return"".concat(a," ").concat(o,"w")}))}(t).join(", "),src:Object.values(t.downloadUrls[0])[0],sizes:a,alt:t.metadata.name,loading:"lazy"})},v={sm:576,md:768,lg:992,xl:1200};function x(e){return"@media (min-width: ".concat(v[e],"px)")}var E=v,j=n(77),O=m.b.div.withConfig({displayName:"Gallery__Wrapper",componentId:"m682mz-0"})(["flex:1 0 auto;display:flex;flex-wrap:wrap;padding:5px;margin-bottom:50px;"]),I=Object(j.a)((function(e){return o.a.createElement(O,e)})),_=m.b.div.withConfig({displayName:"Gallery__Item",componentId:"m682mz-1"})(["flex:0 0 auto;width:calc(50%);padding:5px;overflow:hidden;height:250px;","{width:calc(33.3%);}","{width:calc(25%);}","{width:calc(20%);}"],x("sm"),x("md"),x("lg")),C=Object(j.b)((function(e){return o.a.createElement(_,e)})),k=Object(m.b)(y).withConfig({displayName:"Gallery__Thumb",componentId:"m682mz-2"})(["width:100%;height:100%;object-fit:cover;border-radius:3px;content-visibility:auto;"]),N=m.b.div.withConfig({displayName:"Gallery__UploadIndicator",componentId:"m682mz-3"})(["position:fixed;top:0;left:0;right:0;height:3px;opacity:",";transition:opacity 300ms;pointer-events:none;&:after{content:'';display:block;height:inherit;width:","%;background:#54a2e6;}"],(function(e){return 0===e.uploadProgress||100===e.uploadProgress?0:1}),(function(e){return e.uploadProgress||0})),S=m.b.div.withConfig({displayName:"Gallery__FooterBar",componentId:"m682mz-4"})(["position:fixed;left:0;right:0;bottom:0px;display:flex;align-items:center;justify-content:center;height:50px;padding:10px;font-size:12px;background:#333;color:#999;transform:translateY(","%);transition:transform 300ms ease;"],(function(e){return e.hideFooter?100:0})),D=m.b.button.withConfig({displayName:"Gallery__EmailButton",componentId:"m682mz-5"})(["background:none;border:0;padding:0;margin:0;color:#999;cursor:pointer;"]),B=m.b.button.withConfig({displayName:"Gallery__LoginButton",componentId:"m682mz-6"})(["padding:0;margin:0;background:none;border:0;color:#999;cursor:pointer;"]);var L=function(e){var t=e.images,n=e.uploadProgress,i=e.handleSortEnd,r=e.shouldCancelStart,c=e.user,l=e.signOut,d=Object(f.g)(),s=Object(a.useState)(!1),p=Object(u.a)(s,2),m=p[0],b=p[1];return Object(a.useEffect)((function(){var e;function t(t){var n=window.scrollY;n<50||n>=document.documentElement.scrollHeight-window.innerHeight-50?b(!1):(b(n>e),e=window.scrollY)}return window.addEventListener("scroll",t,{passive:!0}),function(){window.removeEventListener("scroll",t)}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{uploadProgress:n}),o.a.createElement(I,{axis:"xy",pressDelay:100,onSortEnd:i,shouldCancelStart:r},t.length?t.map((function(e,t){return o.a.createElement(C,{index:t,key:e.id},o.a.createElement(g.b,{to:"/image/".concat(e.id)},o.a.createElement(k,{image:e,sizes:"50vw, (min-width: ".concat(E.sm,"px) 33.3vw, (min-width: ").concat(E.md,"px) 25vw, (min-width: ").concat(E.lg,"px) 20vw")})))})):null),o.a.createElement(S,{hideFooter:m},o.a.createElement("span",null,o.a.createElement("span",null,"\xa9 Niels Erik Christiansen"),o.a.createElement("span",null," | "),o.a.createElement(D,{onClick:function(){window.open("mailto:".concat("nechristiansen","@").concat("gmail.com"),"_blank")}},"@ Email"),o.a.createElement("span",null," | "),o.a.createElement(B,{onClick:c?l:function(){d.push("/login")}},c?"Log ud":"Log ind"))))},z=n(124),F=n(51),P=n(125),T=n.n(P),A=n(27),G=n(126),W=(n(242),n(132)),R=n(130),U=n.n(R),Y=n(127);function H(){var e=Object(z.a)(["\n    body {\n        &:before {\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-image: ",";\n            filter: blur(100px);\n        }\n    }\n\n    .editorWrapper {\n        color: black;\n        margin-bottom: 5px;\n    }\n\n    .editorTextField {\n        height: auto;\n        padding: 10px;\n        background: white;\n    }\n"]);return H=function(){return e},e}var J=Object(m.a)(H(),(function(e){return e.gradient})),M=m.b.div.withConfig({displayName:"ImageDetails__Wrapper",componentId:"s7hyp6-0"})(["position:relative;display:flex;flex:1 1 auto;flex-direction:column;width:100%;margin:0 auto;"]),K=m.b.div.withConfig({displayName:"ImageDetails__Overlay",componentId:"s7hyp6-1"})(["position:fixed;top:10%;bottom:0;left:0;right:0;display:flex;flex-direction:column;background:linear-gradient(0deg,rgba(0,0,0,1) 0%,rgba(0,0,0,0.6) 100%);box-shadow:0 -10px 20px rgba(0,0,0,0.5);transform:translateY(",");transition:transform 300ms ease;"],(function(e){return e.active?0:"calc(100% - 60px)"})),Q=m.b.div.withConfig({displayName:"ImageDetails__OverlayNav",componentId:"s7hyp6-2"})(["display:flex;justify-content:space-between;align-items:center;height:60px;"]),q=m.b.button.withConfig({displayName:"ImageDetails__Back",componentId:"s7hyp6-3"})(["display:flex;align-items:center;height:inherit;background:none;border:0;padding:0 0 0 20px;color:inherit;font-size:inherit;"]),V=Object(m.b)(U.a).withConfig({displayName:"ImageDetails__BackArrow",componentId:"s7hyp6-4"})(["margin-right:10px;"]),$=m.b.button.withConfig({displayName:"ImageDetails__Toggle",componentId:"s7hyp6-5"})(["margin-right:30px;background:none;border:0;padding:0;color:inherit;height:inherit;font-size:inherit;"]),X=m.b.div.withConfig({displayName:"ImageDetails__ImageWrapper",componentId:"s7hyp6-6"})(["position:relative;flex:1 0 auto;padding:10px;"]),Z=Object(m.b)(y).withConfig({displayName:"ImageDetails__DetailedImage",componentId:"s7hyp6-7"})(["flex:none;display:block;margin:0 auto;filter:drop-shadow(0px 20px 20px rgba(0,0,0,0.5));opacity:",";position:absolute;width:calc(100% - 20px);height:calc(100% - 80px);object-fit:contain;transition:opacity 300ms ease;"],(function(e){return e.fade?.3:1})),ee=m.b.div.withConfig({displayName:"ImageDetails__Description",componentId:"s7hyp6-8"})(["flex:1 1 auto;min-width:1px;padding:10px 20px;overflow:auto;-webkit-overflow-scrolling:touch;@media (min-width:375px){padding:10px 60px;}"]),te=m.b.div.withConfig({displayName:"ImageDetails__ButtonBar",componentId:"s7hyp6-9"})(["position:relative;flex:none;display:flex;justify-content:center;height:60px;margin:20px 0;"]),ne=m.b.button.withConfig({displayName:"ImageDetails__Button",componentId:"s7hyp6-10"})(["flex:1 1 50%;font-weight:bold;border:0;max-width:300px;box-shadow:0 5px 10px rgba(0,0,0,0.2);"]),ae=Object(m.b)(ne).withConfig({displayName:"ImageDetails__DeleteButton",componentId:"s7hyp6-11"})(["color:#fff;background:linear-gradient(0deg,rgba(162,0,0,1) 0%,rgba(218,0,0,1) 100%);"]),oe=m.b.div.withConfig({displayName:"ImageDetails__EditorWrappper",componentId:"s7hyp6-12"})(["margin:0 auto;"]),ie=m.b.button.withConfig({displayName:"ImageDetails__SaveButton",componentId:"s7hyp6-13"})(["background:orange;border:none;width:100%;height:40px;font-weight:bold;"]);function re(e){e.history;var t=e.image,n=e.removeImage,i=e.updateDescription,r=t.description,c=t.metadata.visionData.colors,l=c.sort((function(e,t){return t.score-e.score})).reduce((function(e,t,n){var a=t.color,o=a.red,i=a.green,r=a.blue;return n<2?[].concat(Object(s.a)(e),["rgb(".concat(o,", ").concat(i,", ").concat(r,")")]):e}),[]),d=Object(u.a)(l,2),m=[d[0],d[1]].sort((function(e,t){return Object(F.b)(t)-Object(F.b)(e)})),g=Object(u.a)(m,2),f=(g[0],g[1]),b=Object(a.useContext)(he).user,h=T()(c.map((function(e){var t=e.color,n=t.red,a=t.green,o=t.blue;return"rgb(".concat(n,",").concat(a,",").concat(o,")")}))),w=["#000","#FFF"].sort((function(e,t){return Object(F.a)(f,t)-Object(F.a)(f,e)})),y=(Object(u.a)(w,1)[0],Object(a.useState)(r?A.EditorState.createWithContent(Object(A.convertFromRaw)(r)):A.EditorState.createEmpty())),v=Object(u.a)(y,2),x=v[0],E=v[1],j=Object(a.useState)(!1),O=Object(u.a)(j,2),I=O[0],_=O[1],C=Object(a.useState)(!1),k=Object(u.a)(C,2),N=k[0],S=k[1];return Object(a.useEffect)((function(){_(!0)}),[x]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Y.a,null,o.a.createElement("meta",{property:"og:image",content:Object.values(t.downloadUrls[0])[0]})),o.a.createElement(J,{gradient:h.css("radial")}),o.a.createElement(M,null,o.a.createElement(X,{onClick:function(){return S(!1)}},o.a.createElement(Z,{image:Object(p.a)({},t),fade:N})),o.a.createElement(K,{active:N},o.a.createElement(Q,null,o.a.createElement(q,{onClick:function(){return window.history.back()}},o.a.createElement(V,null)," Tilbage"),o.a.createElement($,{onClick:function(){return S(!N)}},N?"Skjul":"Vis"," beskrivelse")),o.a.createElement(ee,null,b&&o.a.createElement(oe,null,o.a.createElement(G.Editor,{editorState:x,onEditorStateChange:E,toolbarClassName:"editorToolbar",wrapperClassName:"editorWrapper",editorClassName:"editorTextField"}),I&&o.a.createElement(ie,{onClick:function(){var e=t.id,n=Object(A.convertToRaw)(x.getCurrentContent());i({id:e,description:n}),_(!1)}},"Gem beskrivelse")),!b&&r&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(W.a)(Object(A.convertFromRaw)(r))}}),o.a.createElement(te,null,b&&o.a.createElement(ae,{onClick:function(){return n(t)}},"Slet billede"))))))}var ce=n(131),le=n.n(ce),de=m.b.div.withConfig({displayName:"App__LoggedInBar",componentId:"wphell-0"})(["position:relative;display:flex;justify-content:space-between;align-items:center;padding:10px;background:#333;"]),se=m.b.form.withConfig({displayName:"App__LoginForm",componentId:"wphell-1"})(["width:100%;max-width:500px;padding:20px;margin:0 auto;"]),ue=m.b.input.withConfig({displayName:"App__FormInput",componentId:"wphell-2"})(["display:block;width:100%;height:40px;padding:10px;margin-bottom:10px;border:1px solid #999;background:#fff;"]),pe=m.b.button.withConfig({displayName:"App__LoginButton",componentId:"wphell-3"})(["width:100%;height:40px;"]),me=Object(m.b)(g.b).withConfig({displayName:"App__StyledLink",componentId:"wphell-4"})(["display:flex;justify-content:center;align-items:center;height:40px;margin-top:20px;color:#fff;"]);h.a.initializeApp({apiKey:"AIzaSyBPG6_rLNCqJKQaQxRxoL9kiNRrst_SGng",authDomain:"necgallery-9b4b2.firebaseapp.com",databaseURL:"https://necgallery-9b4b2.firebaseio.com",projectId:"necgallery-9b4b2",storageBucket:"necgallery-9b4b2.appspot.com",messagingSenderId:"534201773677",appId:"1:534201773677:web:57fa8d6f25817e60155964"}),h.a.analytics();var ge=h.a.firestore(),fe=ge.collection("gallery"),be=h.a.storage().ref(),he=Object(a.createContext)();function we(e){e.preventDefault()}function ye(e){return fe.doc(e).delete()}var ve=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(!1),c=Object(u.a)(r,2),m=c[0],w=c[1],y=Object(a.useState)(0),v=Object(u.a)(y,2),x=v[0],E=v[1],j=Object(a.useState)(""),O=Object(u.a)(j,2),I=O[0],_=O[1],C=Object(a.useState)(""),k=Object(u.a)(C,2),N=k[0],S=k[1];function D(e){e.preventDefault();var t=e.dataTransfer.files,n=void 0===t?{}:t;!function(e,t){Promise.all(e.map((function(e){return new Promise((function(n,a){var o=Object(b.a)(),i=be.child("gallery/".concat(o,"/original.jpg")).put(e);i.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t(n)})),i.then((function(e){n(Object(p.a)(Object(p.a)({},e),{},{id:o}))})).catch((function(e){a(new Error(e.message_))}))}))}))).catch((function(e){alert(e)}))}(Object.values(n).reduce((function(e,t){return t.type.includes("image")?[].concat(Object(s.a)(e),[t]):e}),[]),E)}function B(){return!1===m}function z(e){var t=e.oldIndex,n=e.newIndex;i((function(e){return le()(e,t,n)}))}function F(){fe.orderBy("order").get().then((function(e){i(R(e))}))}function P(e){var t=e.id,n=e.description;fe.doc(t).update({description:n}),F()}function T(e){if(window.confirm("Er du sikker p\xe5 du vil slette billedet?")){var t=e.id,n=e.downloadUrls.map((function(e){var t=Object.keys(e);return Object(u.a)(t,1)[0]}));Promise.all([n.map((function(e){return n="gallery/".concat(t,"/").concat(e,".jpg"),be.child(n).delete();var n})),ye(t)]).then((function(){console.log("successfully deleted images"),F()})).catch((function(e){console.log(e)}))}}function A(e){e.preventDefault(),h.a.auth().signInWithEmailAndPassword(I,N).catch((function(e){e.code;var t=e.message;alert(t)}))}function G(){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.auth().signOut();case 2:w(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=[];return e.forEach((function(e){var n=e.id,a=e.data();t.push(Object(p.a)({id:n},a))})),t}return Object(a.useEffect)((function(){var e=h.a.auth().onAuthStateChanged((function(e){e&&w(e)}));return function(){e()}}),[]),Object(a.useEffect)((function(){return F(),fe.onSnapshot((function(e){var t=R(e),n=Math.max.apply(Math,Object(s.a)(t.map((function(e){return e.order})))),a=t.find((function(e){return-1===e.order}));a&&i((function(e){return[].concat(Object(s.a)(e),[Object(p.a)(Object(p.a)({},a),{},{order:n+1})])}))})),document.addEventListener("drop",D),document.addEventListener("dragover",we),function(){document.removeEventListener("drop",D),document.removeEventListener("dragover",we)}}),[]),Object(a.useEffect)((function(){if(m){var e=ge.batch();Object.entries(n).forEach((function(t){var n=Object(u.a)(t,2),a=n[0],o=n[1].id,i=fe.doc(o);e.update(i,{order:parseInt(a)})})),e.commit().then((function(){console.log("committed batch")}))}}),[m,n]),o.a.createElement(he.Provider,{value:{user:m}},m&&o.a.createElement(de,null,o.a.createElement("span",null,"Du er logget ind")),o.a.createElement(g.a,null,o.a.createElement(f.d,null,o.a.createElement(f.b,{exact:!0,path:"/",render:function(e){return o.a.createElement(L,Object.assign({},e,{images:n,user:m,signOut:G,uploadProgress:x,handleSortEnd:z,shouldCancelStart:B}))}}),o.a.createElement(f.b,{exact:!0,path:"/image/:id",render:function(e){if(n.length){var t=e.match.params.id,a=n.find((function(e){return e.id===t}));return a?o.a.createElement(re,Object.assign({},e,{image:a,removeImage:T,updateDescription:P,user:m})):o.a.createElement(f.a,{to:"/"})}}}),o.a.createElement(f.b,{exact:!0,path:"/login",render:function(){return!1===m?o.a.createElement(se,{onSubmit:A},o.a.createElement(ue,{type:"text",placeholder:"Email",value:I,onChange:function(e){return _(e.target.value)}}),o.a.createElement(ue,{type:"password",placeholder:"Password",value:N,onChange:function(e){return S(e.target.value)}}),o.a.createElement(pe,null,"Log ind"),o.a.createElement(me,{to:"/"},"Tilbage")):o.a.createElement(f.a,{to:"/"})}}),o.a.createElement(f.a,{to:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[246,1,2]]]);
//# sourceMappingURL=main.f3890af0.chunk.js.map