(this.webpackJsonpnec=this.webpackJsonpnec||[]).push([[0],{121:function(e,t,n){e.exports=n(242)},242:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(31),i=n.n(r),c=n(63),l=n.n(c),d=n(110),s=n(14),m=n(25),p=n(7),u=n(38),g=n(9),b=n(245),h=n(2),f=n.n(h),y=(n(70),n(243),n(111)),w=n.n(y);n(138);const x=p.b.img.withConfig({displayName:"Image",componentId:"sc-1ies6rj-0"})(["width:auto;height:auto;max-width:100%;max-height:100%;"]);var E=e=>{const t=e.image,n=e.className,a=e.sizes;return o.a.createElement(x,{className:n,key:t.id,srcSet:(e=>e.downloadUrls.map(e=>{const t=Object(s.a)(Object.entries(e)[0],2),n=t[0],a=t[1],o=n.split("x")[0];return"".concat(a," ").concat(o,"w")}))(t).join(", "),src:Object.values(t.downloadUrls[0])[0],sizes:a,alt:t.metadata.name,loading:"lazy"})};const j={sm:576,md:768,lg:992,xl:1200};function v(e){return"@media (min-width: ".concat(j[e],"px)")}var O=j,I=n(67);const _=p.b.div.withConfig({displayName:"Gallery__Wrapper",componentId:"m682mz-0"})(["flex:1 0 auto;display:flex;flex-wrap:wrap;padding:5px;"]),C=Object(I.a)(e=>o.a.createElement(_,e)),k=p.b.div.withConfig({displayName:"Gallery__Item",componentId:"m682mz-1"})(["flex:0 0 auto;width:calc(50%);max-height:300px;padding:5px;overflow:hidden;","{width:calc(33.3%);}","{width:calc(25%);}","{width:calc(20%);}"],v("sm"),v("md"),v("lg")),N=Object(I.b)(e=>o.a.createElement(k,e)),S=Object(p.b)(E).withConfig({displayName:"Gallery__Thumb",componentId:"m682mz-2"})(["width:100%;height:100%;object-fit:cover;border-radius:3px;"]),D=p.b.div.withConfig({displayName:"Gallery__UploadIndicator",componentId:"m682mz-3"})(["position:fixed;top:0;left:0;right:0;height:3px;opacity:",";transition:opacity 300ms;pointer-events:none;&:after{content:'';display:block;height:inherit;width:","%;background:#54a2e6;}"],e=>0===e.uploadProgress||100===e.uploadProgress?0:1,e=>e.uploadProgress||0),B=p.b.div.withConfig({displayName:"Gallery__FooterBar",componentId:"m682mz-4"})(["margin:auto 10px 10px;border-radius:5px;padding:10px;font-size:12px;background:#333;color:#999;"]),z=p.b.button.withConfig({displayName:"Gallery__EmailButton",componentId:"m682mz-5"})(["background:none;border:0;padding:0;margin:0;color:#999;cursor:pointer;"]),P=p.b.button.withConfig({displayName:"Gallery__LoginButton",componentId:"m682mz-6"})(["padding:0;margin:0;background:none;border:0;color:#999;cursor:pointer;"]);var F=function(e){const t=e.images,n=e.uploadProgress,a=e.handleSortEnd,r=e.shouldCancelStart,i=e.user,c=e.signOut,l=Object(g.g)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(D,{uploadProgress:n}),o.a.createElement(C,{axis:"xy",pressDelay:500,onSortEnd:a,shouldCancelStart:r},t.length?t.map((e,t)=>o.a.createElement(N,{index:t,key:e.id,"data-order":e.order},o.a.createElement(u.b,{to:"/nec/image/".concat(e.id)},o.a.createElement(S,{image:e,sizes:"50vw, (min-width: ".concat(O.sm,"px) 33.3vw, (min-width: ").concat(O.md,"px) 25vw, (min-width: ").concat(O.lg,"px) 20vw")})))):null),o.a.createElement(B,null,o.a.createElement("span",null,"\xa9 Niels Erik Christiansen"),o.a.createElement("span",null," | "),o.a.createElement(z,{onClick:function(){window.open("mailto:nechristiansen@gmail.com","_blank")}},"@ Email"),o.a.createElement("span",null," | "),o.a.createElement(P,{onClick:i?c:function(){l.push("/nec/login")}},i?"Log ud":"Log ind")))},L=n(116),G=n(40),T=n(117),W=n.n(T),R=n(19),A=n(118),U=(n(241),n(120));function J(){const e=Object(L.a)(["\n    body {\n        &:before {\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-image: ",";\n            filter: blur(100px);\n        }\n    }\n\n    .editorWrapper {\n        color: black;\n        margin-bottom: 5px;\n    }\n\n    .editorTextField {\n        height: auto;\n        padding: 10px;\n        background: white;\n    }\n"]);return J=function(){return e},e}const H=Object(p.a)(J(),e=>e.gradient),K=p.b.div.withConfig({displayName:"ImageDetails__Wrapper",componentId:"s7hyp6-0"})(["position:relative;display:flex;flex-direction:column;height:100%;margin:0 auto;"]),M=p.b.div.withConfig({displayName:"ImageDetails__Background",componentId:"s7hyp6-1"})(["background:rgb(0,0,0);background:linear-gradient(0deg,rgba(0,0,0,0.20211834733893552) 0%,rgba(0,0,0,0) 100%);border-bottom-left-radius:5px;border-bottom-right-radius:5px;margin-bottom:20px;"]),Q=p.b.div.withConfig({displayName:"ImageDetails__ImageWrapper",componentId:"s7hyp6-2"})(["position:relative;flex:1 0 auto;padding:10px;"]),q=Object(p.b)(E).withConfig({displayName:"ImageDetails__DetailedImage",componentId:"s7hyp6-3"})(["flex:none;display:block;height:calc(100vh - 20px);margin:0 auto;filter:drop-shadow(0px 20px 20px rgba(0,0,0,0.5));object-fit:contain;"]),V=p.b.div.withConfig({displayName:"ImageDetails__Description",componentId:"s7hyp6-4"})(["flex:1 1 auto;min-width:1px;padding:10px 20px;"]),$=p.b.div.withConfig({displayName:"ImageDetails__ButtonBar",componentId:"s7hyp6-5"})(["position:relative;flex:none;display:flex;width:100%;height:60px;margin:auto 0 20px 0;box-shadow:0 5px 10px rgba(0,0,0,0.2);"]),X=p.b.button.withConfig({displayName:"ImageDetails__Button",componentId:"s7hyp6-6"})(["flex:1 1 50%;font-weight:bold;border:0;"]),Y=Object(p.b)(X).withConfig({displayName:"ImageDetails__BackButton",componentId:"s7hyp6-7"})(["background:",";color:",";"],({backgroundColor:e})=>e,({fontColor:e})=>e),Z=Object(p.b)(X).withConfig({displayName:"ImageDetails__DeleteButton",componentId:"s7hyp6-8"})(["color:#fff;background:linear-gradient(0deg,rgba(162,0,0,1) 0%,rgba(218,0,0,1) 100%);"]),ee=p.b.div.withConfig({displayName:"ImageDetails__EditorWrappper",componentId:"s7hyp6-9"})(["margin:0 auto;"]),te=p.b.button.withConfig({displayName:"ImageDetails__SaveButton",componentId:"s7hyp6-10"})(["background:orange;border:none;width:100%;height:40px;font-weight:bold;"]);var ne=e=>{const t=e.history,n=e.image,r=e.removeImage,i=e.updateDescription,c=n.description,l=n.metadata.visionData.colors,d=l.sort((e,t)=>t.score-e.score).reduce((e,t,n)=>{const a=t.color,o=a.red,r=a.green,i=a.blue;return n<2?[...e,"rgb(".concat(o,", ").concat(r,", ").concat(i,")")]:e},[]),p=Object(s.a)(d,2),u=[p[0],p[1]].sort((e,t)=>Object(G.b)(t)-Object(G.b)(e)),g=Object(s.a)(u,2),b=(g[0],g[1]),h=Object(a.useContext)(de).user,f=W()(l.map(({color:{red:e,green:t,blue:n}})=>"rgb(".concat(e,",").concat(t,",").concat(n,")"))),y=["#000","#FFF"].sort((e,t)=>Object(G.a)(b,t)-Object(G.a)(b,e)),w=Object(s.a)(y,1)[0],x=Object(a.useState)(c?R.EditorState.createWithContent(Object(R.convertFromRaw)(c)):R.EditorState.createEmpty()),E=Object(s.a)(x,2),j=E[0],v=E[1],O=Object(a.useState)(!1),I=Object(s.a)(O,2),_=I[0],C=I[1];return Object(a.useEffect)(()=>{C(!0)},[j]),o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{gradient:f.css("radial")}),o.a.createElement(K,null,o.a.createElement(M,null,o.a.createElement(Q,null,o.a.createElement(q,{image:Object(m.a)({},n)})),o.a.createElement(V,null,h&&o.a.createElement(ee,null,o.a.createElement(A.Editor,{editorState:j,onEditorStateChange:v,toolbarClassName:"editorToolbar",wrapperClassName:"editorWrapper",editorClassName:"editorTextField"}),_&&o.a.createElement(te,{onClick:function(){const e=n.id,t=Object(R.convertToRaw)(j.getCurrentContent());i({id:e,description:t}),C(!1)}},"Gem beskrivelse")),!h&&c&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(U.a)(Object(R.convertFromRaw)(c))}}))),o.a.createElement($,null,o.a.createElement(Y,{backgroundColor:b,fontColor:w,onClick:()=>t.push("/nec")},"Tilbage"),h&&o.a.createElement(Z,{onClick:()=>r(n)},"Slet billede"))))},ae=n(119),oe=n.n(ae);const re=p.b.div.withConfig({displayName:"App__LoggedInBar",componentId:"wphell-0"})(["position:relative;display:flex;justify-content:space-between;align-items:center;padding:10px;background:#333;"]);f.a.initializeApp({apiKey:"AIzaSyBPG6_rLNCqJKQaQxRxoL9kiNRrst_SGng",authDomain:"necgallery-9b4b2.firebaseapp.com",databaseURL:"https://necgallery-9b4b2.firebaseio.com",projectId:"necgallery-9b4b2",storageBucket:"necgallery-9b4b2.appspot.com",messagingSenderId:"534201773677"});const ie=f.a.firestore(),ce=ie.collection("gallery"),le=f.a.storage().ref(),de=Object(a.createContext)();function se(e){e.preventDefault()}function me(e){return ce.doc(e).delete()}var pe=function(){const e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(s.a)(i,2),p=c[0],h=c[1],y=Object(a.useState)(0),x=Object(s.a)(y,2),E=x[0],j=x[1];function v(e){e.preventDefault();const t=e.dataTransfer.files,n=void 0===t?{}:t;!function(e,t){Promise.all(e.map(e=>new Promise((n,a)=>{const o=Object(b.a)(),r=le.child("gallery/".concat(o,"/original.jpg")).put(e);r.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t(n)})),r.then(e=>{n(Object(m.a)(Object(m.a)({},e),{},{id:o}))}).catch(e=>{a(new Error(e.message_))})}))).catch(e=>{alert(e)})}(Object.values(n).reduce((e,t)=>t.type.includes("image")?[...e,t]:e,[]),j)}function O(){return!1===p}function I({oldIndex:e,newIndex:t}){r(n=>oe()(n,e,t))}function _(){ce.orderBy("order").get().then(e=>{r(D(e))})}function C({id:e,description:t}){ce.doc(e).update({description:t}),_()}function k(e){if(!window.confirm("Er du sikker p\xe5 du vil slette billedet?"))return;const t=e.id,n=e.downloadUrls.map(e=>{const t=Object.keys(e);return Object(s.a)(t,1)[0]});Promise.all([n.map(e=>{return n="gallery/".concat(t,"/").concat(e,".jpg"),le.child(n).delete();var n}),me(t)]).then((function(){console.log("successfully deleted images"),_()})).catch((function(e){console.log(e)}))}function N(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.auth().signOut();case 2:h(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){const t=[];return e.forEach(e=>{const n=e.id,a=e.data();t.push(Object(m.a)({id:n},a))}),t}return Object(a.useEffect)(()=>{const e=f.a.auth().onAuthStateChanged((function(e){e&&h(e)}));return()=>{e()}},[]),Object(a.useEffect)(()=>(_(),ce.onSnapshot(e=>{const t=D(e),n=Math.max(...t.map(({order:e})=>e)),a=t.find(({order:e})=>-1===e);a&&r(e=>[...e,Object(m.a)(Object(m.a)({},a),{},{order:n+1})])}),document.addEventListener("drop",v),document.addEventListener("dragover",se),()=>{document.removeEventListener("drop",v),document.removeEventListener("dragover",se)}),[]),Object(a.useEffect)(()=>{if(p){const e=ie.batch();Object.entries(n).forEach(([t,n])=>{const a=n.id,o=ce.doc(a);e.update(o,{order:parseInt(t)})}),e.commit().then(()=>{console.log("committed batch")})}},[p,n]),o.a.createElement(de.Provider,{value:{user:p}},p&&o.a.createElement(re,null,o.a.createElement("span",null,"Hej ",p.displayName)),o.a.createElement(u.a,null,o.a.createElement(g.d,null,o.a.createElement(g.b,{exact:!0,path:"/nec",render:e=>o.a.createElement(F,Object.assign({},e,{images:n,user:p,signOut:N,uploadProgress:E,handleSortEnd:I,shouldCancelStart:O}))}),o.a.createElement(g.b,{exact:!0,path:"/nec/image/:id",render:e=>{if(n.length){const t=e.match.params.id,a=n.find(e=>e.id===t);return a?o.a.createElement(ne,Object.assign({},e,{image:a,removeImage:k,updateDescription:C,user:p})):o.a.createElement(g.a,{to:"/nec"})}}}),o.a.createElement(g.b,{exact:!0,path:"/nec/login",render:()=>!1===p?o.a.createElement(w.a,{uiConfig:{signInFlow:"popup",signInSuccessUrl:"/nec",signInOptions:[f.a.auth.FacebookAuthProvider.PROVIDER_ID]},firebaseAuth:f.a.auth()}):o.a.createElement(g.a,{to:"/nec"})}),o.a.createElement(g.a,{to:"/nec"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[121,1,2]]]);
//# sourceMappingURL=main.c27015fe.chunk.js.map