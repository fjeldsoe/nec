(this.webpackJsonpnec=this.webpackJsonpnec||[]).push([[0],{124:function(e,t,n){e.exports=n(242)},242:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(35),r=n.n(i),c=n(66),l=n.n(c),d=n(113),s=n(10),p=n(29),m=n(6),g=n(38),u=n(9),b=n(255),h=n(37),f=n.n(h);n(133),n(243),n(135);const w=m.b.img.withConfig({displayName:"Image",componentId:"sc-1ies6rj-0"})(["width:auto;height:auto;max-width:100%;max-height:100%;"]);var x=e=>{const t=e.image,n=e.className,a=e.sizes;return o.a.createElement(w,{className:n,key:t.id,srcSet:(e=>e.downloadUrls.map(e=>{const t=Object(s.a)(Object.entries(e)[0],2),n=t[0],a=t[1],o=n.split("x")[0];return"".concat(a," ").concat(o,"w")}))(t).join(", "),src:Object.values(t.downloadUrls[0])[0],sizes:a,alt:t.metadata.name,loading:"lazy"})};const y={sm:576,md:768,lg:992,xl:1200};function E(e){return"@media (min-width: ".concat(y[e],"px)")}var v=y,j=n(70);const O=m.b.div.withConfig({displayName:"Gallery__Wrapper",componentId:"m682mz-0"})(["flex:1 0 auto;display:flex;flex-wrap:wrap;padding:5px;"]),I=Object(j.a)(e=>o.a.createElement(O,e)),_=m.b.div.withConfig({displayName:"Gallery__Item",componentId:"m682mz-1"})(["flex:0 0 auto;width:calc(50%);padding:5px;overflow:hidden;","{width:calc(33.3%);}","{width:calc(25%);}","{width:calc(20%);}"],E("sm"),E("md"),E("lg")),C=Object(j.b)(e=>o.a.createElement(_,e)),k=Object(m.b)(x).withConfig({displayName:"Gallery__Thumb",componentId:"m682mz-2"})(["width:100%;height:100%;object-fit:cover;border-radius:3px;"]),N=m.b.div.withConfig({displayName:"Gallery__UploadIndicator",componentId:"m682mz-3"})(["position:fixed;top:0;left:0;right:0;height:3px;opacity:",";transition:opacity 300ms;pointer-events:none;&:after{content:'';display:block;height:inherit;width:","%;background:#54a2e6;}"],e=>0===e.uploadProgress||100===e.uploadProgress?0:1,e=>e.uploadProgress||0),S=m.b.div.withConfig({displayName:"Gallery__FooterBar",componentId:"m682mz-4"})(["margin:auto 10px 10px;border-radius:5px;padding:10px;font-size:12px;background:#333;color:#999;"]),D=m.b.button.withConfig({displayName:"Gallery__EmailButton",componentId:"m682mz-5"})(["background:none;border:0;padding:0;margin:0;color:#999;cursor:pointer;"]),B=m.b.button.withConfig({displayName:"Gallery__LoginButton",componentId:"m682mz-6"})(["padding:0;margin:0;background:none;border:0;color:#999;cursor:pointer;"]);var L=function(e){const t=e.images,n=e.uploadProgress,a=e.handleSortEnd,i=e.shouldCancelStart,r=e.user,c=e.signOut,l=Object(u.g)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{uploadProgress:n}),o.a.createElement(I,{axis:"xy",pressDelay:500,onSortEnd:a,shouldCancelStart:i},t.length?t.map((e,t)=>o.a.createElement(C,{index:t,key:e.id},o.a.createElement(g.b,{to:"/nec/image/".concat(e.id)},o.a.createElement(k,{image:e,sizes:"50vw, (min-width: ".concat(v.sm,"px) 33.3vw, (min-width: ").concat(v.md,"px) 25vw, (min-width: ").concat(v.lg,"px) 20vw")})))):null),o.a.createElement(S,null,o.a.createElement("span",null,"\xa9 Niels Erik Christiansen"),o.a.createElement("span",null," | "),o.a.createElement(D,{onClick:function(){window.open("mailto:".concat("nechristiansen","@").concat("gmail.com"),"_blank")}},"@ Email"),o.a.createElement("span",null," | "),o.a.createElement(B,{onClick:r?c:function(){l.push("/nec/login")}},r?"Log ud":"Log ind")))},z=n(117),P=n(44),F=n(118),G=n.n(F),T=n(21),W=n(119),A=(n(238),n(122)),R=n(120),U=n.n(R);function J(){const e=Object(z.a)(["\n    body {\n        &:before {\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-image: ",";\n            filter: blur(100px);\n        }\n    }\n\n    .editorWrapper {\n        color: black;\n        margin-bottom: 5px;\n    }\n\n    .editorTextField {\n        height: auto;\n        padding: 10px;\n        background: white;\n    }\n"]);return J=function(){return e},e}const K=Object(m.a)(J(),e=>e.gradient),M=m.b.div.withConfig({displayName:"ImageDetails__Wrapper",componentId:"s7hyp6-0"})(["position:relative;display:flex;flex:1 1 auto;flex-direction:column;width:100%;margin:0 auto;"]),Q=m.b.div.withConfig({displayName:"ImageDetails__Overlay",componentId:"s7hyp6-1"})(["position:fixed;top:10%;bottom:0;left:10px;right:10px;display:flex;flex-direction:column;background:linear-gradient(0deg,rgba(0,0,0,1) 0%,rgba(0,0,0,0.6) 100%);border-top-left-radius:20px;border-top-right-radius:20px;box-shadow:0 -10px 20px rgba(0,0,0,0.5);transform:translateY(",");transition:transform 400ms cubic-bezier(0.71,0.01,0.28,1.21);"],({active:e})=>e?0:"calc(100% - 40px)"),q=m.b.div.withConfig({displayName:"ImageDetails__OverlayNav",componentId:"s7hyp6-2"})(["display:flex;justify-content:space-between;align-items:center;height:40px;"]),H=m.b.button.withConfig({displayName:"ImageDetails__Back",componentId:"s7hyp6-3"})(["height:inherit;width:60px;background:none;border:0;padding:0;color:inherit;"]),V=m.b.button.withConfig({displayName:"ImageDetails__Toggle",componentId:"s7hyp6-4"})(["margin-right:30px;background:none;border:0;padding:0;color:inherit;height:inherit;"]),Y=m.b.div.withConfig({displayName:"ImageDetails__ImageWrapper",componentId:"s7hyp6-5"})(["position:relative;flex:1 0 auto;padding:10px;"]),$=Object(m.b)(x).withConfig({displayName:"ImageDetails__DetailedImage",componentId:"s7hyp6-6"})(["flex:none;display:block;margin:0 auto;filter:drop-shadow(0px 20px 20px rgba(0,0,0,0.5));position:absolute;width:calc(100% - 20px);height:calc(100% - 60px);object-fit:contain;"]),X=m.b.div.withConfig({displayName:"ImageDetails__Description",componentId:"s7hyp6-7"})(["flex:1 1 auto;min-width:1px;padding:10px 20px;overflow:auto;-webkit-overflow-scrolling:touch;"]),Z=m.b.div.withConfig({displayName:"ImageDetails__ButtonBar",componentId:"s7hyp6-8"})(["position:relative;flex:none;display:flex;justify-content:center;height:60px;margin:auto 20px 0;"]),ee=m.b.button.withConfig({displayName:"ImageDetails__Button",componentId:"s7hyp6-9"})(["flex:1 1 50%;font-weight:bold;border:0;max-width:300px;box-shadow:0 5px 10px rgba(0,0,0,0.2);"]),te=Object(m.b)(ee).withConfig({displayName:"ImageDetails__DeleteButton",componentId:"s7hyp6-10"})(["color:#fff;background:linear-gradient(0deg,rgba(162,0,0,1) 0%,rgba(218,0,0,1) 100%);"]),ne=m.b.div.withConfig({displayName:"ImageDetails__EditorWrappper",componentId:"s7hyp6-11"})(["margin:0 auto;"]),ae=m.b.button.withConfig({displayName:"ImageDetails__SaveButton",componentId:"s7hyp6-12"})(["background:orange;border:none;width:100%;height:40px;font-weight:bold;"]);var oe=e=>{const t=e.history,n=e.image,i=e.removeImage,r=e.updateDescription,c=n.description,l=n.metadata.visionData.colors,d=l.sort((e,t)=>t.score-e.score).reduce((e,t,n)=>{const a=t.color,o=a.red,i=a.green,r=a.blue;return n<2?[...e,"rgb(".concat(o,", ").concat(i,", ").concat(r,")")]:e},[]),m=Object(s.a)(d,2),g=[m[0],m[1]].sort((e,t)=>Object(P.b)(t)-Object(P.b)(e)),u=Object(s.a)(g,2),b=(u[0],u[1]),h=Object(a.useContext)(be).user,f=G()(l.map(({color:{red:e,green:t,blue:n}})=>"rgb(".concat(e,",").concat(t,",").concat(n,")"))),w=["#000","#FFF"].sort((e,t)=>Object(P.a)(b,t)-Object(P.a)(b,e)),x=(Object(s.a)(w,1)[0],Object(a.useState)(c?T.EditorState.createWithContent(Object(T.convertFromRaw)(c)):T.EditorState.createEmpty())),y=Object(s.a)(x,2),E=y[0],v=y[1],j=Object(a.useState)(!1),O=Object(s.a)(j,2),I=O[0],_=O[1],C=Object(a.useState)(!1),k=Object(s.a)(C,2),N=k[0],S=k[1];return Object(a.useEffect)(()=>{_(!0)},[E]),o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{gradient:f.css("radial")}),o.a.createElement(M,null,o.a.createElement(Y,null,o.a.createElement($,{image:Object(p.a)({},n)})),o.a.createElement(Q,{active:N},o.a.createElement(q,null,o.a.createElement(H,{onClick:()=>t.push("/nec")},o.a.createElement(U.a,null)),o.a.createElement(V,{onClick:()=>S(!N)},N?"Skjul":"Vis"," beskrivelse")),o.a.createElement(X,null,h&&o.a.createElement(ne,null,o.a.createElement(W.Editor,{editorState:E,onEditorStateChange:v,toolbarClassName:"editorToolbar",wrapperClassName:"editorWrapper",editorClassName:"editorTextField"}),I&&o.a.createElement(ae,{onClick:function(){const e=n.id,t=Object(T.convertToRaw)(E.getCurrentContent());r({id:e,description:t}),_(!1)}},"Gem beskrivelse")),!h&&c&&o.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(A.a)(Object(T.convertFromRaw)(c))}}),o.a.createElement(Z,null,h&&o.a.createElement(te,{onClick:()=>i(n)},"Slet billede"))))))},ie=n(121),re=n.n(ie);const ce=m.b.div.withConfig({displayName:"App__LoggedInBar",componentId:"wphell-0"})(["position:relative;display:flex;justify-content:space-between;align-items:center;padding:10px;background:#333;"]),le=m.b.form.withConfig({displayName:"App__LoginForm",componentId:"wphell-1"})(["width:100%;max-width:500px;padding:20px;margin:0 auto;"]),de=m.b.input.withConfig({displayName:"App__FormInput",componentId:"wphell-2"})(["display:block;width:100%;height:40px;padding:10px;margin-bottom:10px;border:1px solid #999;background:#fff;"]),se=m.b.button.withConfig({displayName:"App__LoginButton",componentId:"wphell-3"})(["width:100%;height:40px;"]),pe=Object(m.b)(g.b).withConfig({displayName:"App__StyledLink",componentId:"wphell-4"})(["display:flex;justify-content:center;align-items:center;height:40px;margin-top:20px;color:#fff;"]);f.a.initializeApp({apiKey:"AIzaSyBPG6_rLNCqJKQaQxRxoL9kiNRrst_SGng",authDomain:"necgallery-9b4b2.firebaseapp.com",databaseURL:"https://necgallery-9b4b2.firebaseio.com",projectId:"necgallery-9b4b2",storageBucket:"necgallery-9b4b2.appspot.com",messagingSenderId:"534201773677"});const me=f.a.firestore(),ge=me.collection("gallery"),ue=f.a.storage().ref(),be=Object(a.createContext)();function he(e){e.preventDefault()}function fe(e){return ge.doc(e).delete()}var we=function(){const e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(!1),c=Object(s.a)(r,2),m=c[0],h=c[1],w=Object(a.useState)(0),x=Object(s.a)(w,2),y=x[0],E=x[1],v=Object(a.useState)(""),j=Object(s.a)(v,2),O=j[0],I=j[1],_=Object(a.useState)(""),C=Object(s.a)(_,2),k=C[0],N=C[1];function S(e){e.preventDefault();const t=e.dataTransfer.files,n=void 0===t?{}:t;!function(e,t){Promise.all(e.map(e=>new Promise((n,a)=>{const o=Object(b.a)(),i=ue.child("gallery/".concat(o,"/original.jpg")).put(e);i.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t(n)})),i.then(e=>{n(Object(p.a)(Object(p.a)({},e),{},{id:o}))}).catch(e=>{a(new Error(e.message_))})}))).catch(e=>{alert(e)})}(Object.values(n).reduce((e,t)=>t.type.includes("image")?[...e,t]:e,[]),E)}function D(){return!1===m}function B({oldIndex:e,newIndex:t}){i(n=>re()(n,e,t))}function z(){ge.orderBy("order").get().then(e=>{i(A(e))})}function P({id:e,description:t}){ge.doc(e).update({description:t}),z()}function F(e){if(!window.confirm("Er du sikker p\xe5 du vil slette billedet?"))return;const t=e.id,n=e.downloadUrls.map(e=>{const t=Object.keys(e);return Object(s.a)(t,1)[0]});Promise.all([n.map(e=>{return n="gallery/".concat(t,"/").concat(e,".jpg"),ue.child(n).delete();var n}),fe(t)]).then((function(){console.log("successfully deleted images"),z()})).catch((function(e){console.log(e)}))}function G(e){e.preventDefault(),f.a.auth().signInWithEmailAndPassword(O,k).catch((function(e){e.code;const t=e.message;alert(t)}))}function T(){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.auth().signOut();case 2:h(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){const t=[];return e.forEach(e=>{const n=e.id,a=e.data();t.push(Object(p.a)({id:n},a))}),t}return Object(a.useEffect)(()=>{const e=f.a.auth().onAuthStateChanged((function(e){e&&h(e)}));return()=>{e()}},[]),Object(a.useEffect)(()=>(z(),ge.onSnapshot(e=>{const t=A(e),n=Math.max(...t.map(({order:e})=>e)),a=t.find(({order:e})=>-1===e);a&&i(e=>[...e,Object(p.a)(Object(p.a)({},a),{},{order:n+1})])}),document.addEventListener("drop",S),document.addEventListener("dragover",he),()=>{document.removeEventListener("drop",S),document.removeEventListener("dragover",he)}),[]),Object(a.useEffect)(()=>{if(m){const e=me.batch();Object.entries(n).forEach(([t,n])=>{const a=n.id,o=ge.doc(a);e.update(o,{order:parseInt(t)})}),e.commit().then(()=>{console.log("committed batch")})}},[m,n]),console.log(m),o.a.createElement(be.Provider,{value:{user:m}},m&&o.a.createElement(ce,null,o.a.createElement("span",null,"Du er logget ind")),o.a.createElement(g.a,null,o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/nec",render:e=>o.a.createElement(L,Object.assign({},e,{images:n,user:m,signOut:T,uploadProgress:y,handleSortEnd:B,shouldCancelStart:D}))}),o.a.createElement(u.b,{exact:!0,path:"/nec/image/:id",render:e=>{if(n.length){const t=e.match.params.id,a=n.find(e=>e.id===t);return a?o.a.createElement(oe,Object.assign({},e,{image:a,removeImage:F,updateDescription:P,user:m})):o.a.createElement(u.a,{to:"/nec"})}}}),o.a.createElement(u.b,{exact:!0,path:"/nec/login",render:()=>!1===m?o.a.createElement(le,{onSubmit:G},o.a.createElement(de,{type:"text",placeholder:"Email",value:O,onChange:e=>I(e.target.value)}),o.a.createElement(de,{type:"password",placeholder:"Password",value:k,onChange:e=>N(e.target.value)}),o.a.createElement(se,null,"Log ind"),o.a.createElement(pe,{to:"/nec"},"Tilbage")):o.a.createElement(u.a,{to:"/nec"})}),o.a.createElement(u.a,{to:"/nec"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.af9d480e.chunk.js.map